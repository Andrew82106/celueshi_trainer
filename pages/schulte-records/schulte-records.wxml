<!--pages/schulte-records/schulte-records.wxml-->

<navigation-bar title="èˆ’å°”ç‰¹è¡¨è®°å½•" back="{{true}}"bindback="onBack"></navigation-bar>

<view class="container">
  
  <!-- æŠ˜çº¿å›¾åŒºåŸŸ -->
  <view class="chart-section">
    <view class="section-title">è®­ç»ƒè¶‹åŠ¿</view>
    <view class="chart-container">
      <canvas canvas-id="clickRateChart" style="width: {{canvasWidth}}px; height: {{canvasHeight}}px;"></canvas>
    </view>
    <view class="chart-legend">
      <text>è®­ç»ƒè®°å½• (æ¨ªè½´: è®­ç»ƒæ¬¡åº, çºµè½´: æ¯ç§’ç‚¹å‡»æ¬¡æ•°)</text>
    </view>
  </view>
  
  <view class="records-section">
    <view class="section-title">è®­ç»ƒè®°å½•è¯¦æƒ…</view>
    <block wx:for="{{records}}" wx:key="index">
      <view class="record-card" animation="{{item.animation}}">
        <view class="card-header">
          <view class="size-badge">{{item.size}}Ã—{{item.size}}</view>
          <view class="time-stamp">{{item.formattedDate}}</view>
          <view class="delete-btn" bindtap="deleteRecord" data-index="{{index}}">Ã—</view>
        </view>
        
        <view class="stats-grid">
          <view class="stat-item">
            <view class="stat-icon">â±</view>
            <view class="stat-content">
              <text class="stat-label">è®­ç»ƒç”¨æ—¶</text>
              <text class="stat-value">{{item.time}}ç§’</text>
            </view>
          </view>
          
          <view class="stat-item">
            <view class="stat-icon">âŒ</view>
            <view class="stat-content">
              <text class="stat-label">é”™è¯¯æ¬¡æ•°</text>
              <text class="stat-value">{{item.errors}}</text>
            </view>
          </view>
        </view>
        
        <!-- æ–°å¢æ¯ç§’ç‚¹å‡»æ¬¡æ•°çš„æ˜¾ç¤º -->
        <view class="stat-highlight">
          <view class="stat-icon">ğŸ¯</view>
          <view class="stat-content">
            <text class="stat-label">æ¯ç§’ç‚¹å‡»æ¬¡æ•°</text>
            <text class="stat-value highlight">{{item.clicksPerSecond}}</text>
          </view>
        </view>
        
        <view class="progress-bar">
          <view class="progress-inner" style="width: {{Math.min(item.errors*10, 100)}}%"></view>
        </view>
      </view>
    </block>
  </view>

</view>